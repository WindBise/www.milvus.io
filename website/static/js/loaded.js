document.addEventListener('DOMContentLoaded', () => {
    // index comparison table
    const trs = document.querySelectorAll('tr');
    [].forEach.call(trs, tr => tr.addEventListener('click', () => {
        const content = tr.nextSibling;
        if(content.className) content.style.display = content.style.display == 'none' ? 'table-row' : 'none';
    }))

    // multiple language
    // const headerNavCon = document.querySelector('.nav-site');
    // const languageMenu = document.querySelector('.nav-site>span');
    // languageMenu.style.display = 'none';
    // const languageMap = {
    //     'en': 'English',
    //     'zh-CN': '简体中文'
    // };
    // Object.keys(languageMap).forEach(l => {
    //     const li = document.createElement('li');
    //     let href = window.location.pathname.replace(/en|zh-CN/, l);

    //     li.innerHTML = `<a href="${href}" target="_self" data-v="${l}">${languageMap[l]}</a>`;
    //     headerNavCon.appendChild(li);
    // });

    // download pdf 
    const nav = document.querySelector('.toc');
    if (!nav) return;

    const createDownloadPdfElement = node => {
        const parent = node.parentNode;
        const arr = window.location.href.split('/');
        const targetName = arr[arr.length-1];
        const targetLink = `https://milvus-www.azurewebsites.net/${targetName}.md.pdf`
        
        const downloadlink = document.createElement('div');
        downloadlink.setAttribute('style', 'margin-left=10px !important')
        downloadlink.innerHTML = `<a class="edit-page-link button" target="_blank" href= ${targetLink} >Download PDF &nbsp; 
                <svg t="1561690039132" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2338" width="12" height="12"><path d="M135.998 875.888V84.838h341.428v254.058h254.135v234.663h69.098V308.687c0.35-2.822 0.35-5.668 0-8.489v-10.517L525.848 15.739H66.9v929.247h616.965l-60.056-69.098H135.998z m410.525-606.091V133.438L682.41 269.797H546.523z" p-id="2339" fill="#33b6f2"></path><path d="M839.756 768.716V592.777H672.914v175.939H557.263l203.112 233.733 194.077-233.733H839.756z m-97.744 69.098V661.875h28.646v175.939h40.93l-51.952 60.317-56.617-60.317h38.993z" p-id="2340" fill="#33b6f2"></path><path d="M218.783 774.8c-6.786 0-13.129-1.525-18.855-4.534-9.99-5.213-16.674-12.102-19.886-20.483-4.018-10.49-1.459-21.463 1.954-27.673 8.185-14.895 25.423-33.356 46.111-49.386 16.949-13.132 44.267-31.019 78.161-41.656l2.56-0.804 1.367-2.309c18.943-31.994 54.741-131.245 62.367-157.008l0.792-2.677-1.267-2.487c-18.065-35.463-28.208-64.048-31.008-87.389-2.323-19.365-0.452-33.326 6.067-45.268 7.071-12.954 23.852-22.355 39.899-22.355 9.772 0 19.709 3.592 26.581 9.609 6.423 5.624 10.99 13.146 13.962 22.997 4.692 15.551 5.167 33.496 1.591 60.003-1.291 9.567-5.514 21.738-9.599 33.508-2.847 8.205-5.791 16.689-7.917 24.701l-0.728 2.744 1.389 2.476c0.21 0.375 0.298 0.659 0.521 1.423 0.333 1.144 0.789 2.71 1.903 4.608 23.145 39.422 52.342 75.311 82.211 101.055 1.521 1.311 2.982 2.166 4.156 2.854 0.8 0.468 1.432 0.838 1.962 1.269l2.525 2.049 3.195-0.607c6.884-1.311 14.273-3.442 21.418-5.504 8.707-2.513 17.711-5.11 24.767-5.85 11.885-1.245 22.004-1.851 30.938-1.851 13.083 0 24.249 1.294 34.137 3.955 10.577 2.846 18.355 6.997 24.48 13.064 6.77 6.706 11.144 17.318 11.144 27.036 0 11.882-7.244 28.111-19.365 34.703-13.206 7.182-27.458 7.753-44.718 7.753-27.606 0-55.199-10.317-89.468-33.454l-2.482-1.676-2.926 0.639c-35.68 7.779-149.94 46.324-174.52 57.251l-1.966 0.874-1.136 1.826c-3.469 5.58-6.597 12.002-9.621 18.211-3.594 7.378-7.31 15.007-11.2 20.24-16.372 22.025-30.752 36.842-45.254 46.627-10.984 7.414-23.146 11.496-34.242 11.496z m50.905-89.143c-18.378 10.291-26.656 16.18-27.126 23.87-0.167 2.72 0.636 6.696 5.406 10.194a8.307 8.307 0 0 0 4.949 1.605c2.663 0 8.897 0 26.016-25.68l16.132-24.201-25.377 14.212z m123.608-162.561c-5.241 14.46-28.31 68.867-35.772 84.371l-7.434 15.443 16.12-5.824c4.72-1.705 58.79-16.564 86.319-23.898l11.741-3.127-8.595-8.589c-18.264-18.249-35.101-38.429-50.045-59.979l-7.718-11.129-4.616 12.732z m157.248 83.609c15.996 9.283 23.304 12.416 28.96 12.416 4.992 0 10.612-2.91 11.418-11.077 0.227-2.29-0.507-4.55-2.064-6.364-2.409-2.806-6.822-5.028-20.533-6.756-7.09-0.893-13.617-1.249-13.892-1.264l-29.047-1.556 25.158 14.601z m-167.415-259.77a8.821 8.821 0 0 0-6.827 3.766c-3.834 5.449-1.912 15.052 3.255 32.003 0.371 1.216 0.791 2.595 0.881 2.974l11.517 57.382 2.324-58.554c0.012-0.285 0.868-28.817-5.235-35.169-1.494-1.555-3.465-2.411-5.551-2.411h-0.17l-0.194 0.009z" p-id="2341" fill="#33b6f2"></path><path d="M387.045 317.771c8.004 0 16.422 3.018 21.97 7.876 5.406 4.734 9.29 11.195 11.872 19.753 4.384 14.531 4.79 31.591 1.355 57.045-1.197 8.872-5.304 20.706-9.275 32.15-2.889 8.326-5.877 16.935-8.07 25.199l-1.456 5.488 2.609 4.651 0.073 0.255c0.386 1.327 1.032 3.547 2.587 6.196 23.525 40.068 53.242 76.581 83.677 102.813 2.004 1.727 3.845 2.805 5.19 3.592 0.397 0.233 0.942 0.551 1.089 0.664l0.277 0.224-2.229-0.119 50.315 29.201c17.429 10.115 25.32 13.362 32.473 13.362 9.971 0 17.359-6.989 18.384-17.391 0.415-4.21-0.906-8.333-3.72-11.611-4.207-4.9-10.975-7.378-24.969-9.141a225.282 225.282 0 0 0-14.392-1.308l-37.2-1.993c4.846-1.197 9.753-2.613 14.551-3.998 8.414-2.428 17.114-4.938 23.553-5.613 11.639-1.219 21.52-1.812 30.207-1.812 12.461 0 23.033 1.215 32.32 3.714 9.355 2.517 16.147 6.101 21.373 11.278 5.425 5.374 9.07 14.24 9.07 22.063 0 9.663-6.313 23.443-15.71 28.554-10.792 5.869-21.94 6.902-41.374 6.902-26.125 0-52.51-9.948-85.551-32.256l-4.964-3.352-5.852 1.276c-35.959 7.841-151.104 46.685-175.872 57.695l-3.931 1.747-2.271 3.653c-3.66 5.887-6.868 12.473-9.971 18.843-3.453 7.089-7.023 14.418-10.523 19.128-15.886 21.372-29.725 35.671-43.552 45.001-9.84 6.64-20.61 10.297-30.326 10.297-5.64 0-10.888-1.255-15.637-3.751-8.412-4.389-13.987-10.032-16.568-16.771-2.959-7.724-1.353-16.513 1.551-21.797 7.747-14.098 24.294-31.752 44.263-47.224 16.496-12.781 43.066-30.184 75.97-40.512l5.12-1.607 2.734-4.618c19.208-32.44 55.369-132.617 63.056-158.587l1.585-5.353-2.534-4.975c-17.685-34.718-27.595-62.537-30.296-85.045-2.168-18.068-0.595-30.354 5.261-41.08 5.921-10.838 20.117-18.706 33.758-18.706m-13.432 69.479l21.915 109.152-8.812 24.308c-5.2 14.345-28.092 68.333-35.499 83.721l-14.885 30.893 32.24-11.648c4.681-1.646 56.652-15.97 85.76-23.724l23.482-6.255-17.19-17.176c-17.969-17.955-34.536-37.811-49.241-59.017l-14.576-21.02 4.468-111.697c0.234-5.839-0.033-13.34-0.713-20.066-1.126-11.14-2.819-16.434-6.47-20.234-2.826-2.941-6.589-4.56-10.597-4.56h-0.001l-0.364 0.001-0.34 0.017c-4.92 0.239-9.371 2.692-12.213 6.729-5.531 7.86-3.67 18.54 2.285 38.074 0.278 0.911 0.618 2.026 0.751 2.502M252.917 728.327c8.405 0 14.821-6.111 23.062-16.666a224.21 224.21 0 0 0 8.778-12.131l32.269-48.406-50.758 28.425c-18.61 10.422-29.962 17.611-30.693 29.55-0.223 3.651 0.552 10.619 8.255 16.268a15.258 15.258 0 0 0 9.087 2.96m134.128-424.556c-18.513 0-37.586 10.51-46.043 26.002-8.457 15.492-8.948 32.163-6.873 49.456 3.271 27.26 15.659 58.2 31.721 89.732-7.986 26.977-43.639 124.962-61.679 155.428-59.938 18.813-111.564 63.876-128.311 94.35-4.879 8.879-6.816 21.902-2.355 33.547 4.443 11.598 13.645 19.208 23.166 24.175 7.119 3.741 14.632 5.339 22.113 5.339 13.688 0 27.271-5.346 38.157-12.692 16.849-11.37 31.883-27.976 46.957-48.254 7.633-10.269 13.685-26.928 21.147-38.93 24.077-10.704 138.583-49.268 173.168-56.81 28.971 19.56 59.788 34.653 93.385 34.653 19.027 0 33.712-0.799 48.062-8.603 14.35-7.804 23.022-26.547 23.022-40.853 0-11.656-5.136-24.005-13.217-32.009-8.081-8.005-17.749-12.204-27.588-14.851-11.108-2.989-23.049-4.195-35.958-4.195-9.958 0-20.492 0.718-31.665 1.888-13.584 1.423-31.68 8.569-46.764 11.439-1.988-1.613-3.982-2.284-5.96-3.989-30.701-26.46-59.435-63-80.744-99.296-1.315-2.24-1.099-3.672-2.355-5.912 5.165-19.466 15.384-42.003 17.687-59.068 3.172-23.513 3.865-44.1-1.826-62.961-2.846-9.431-7.662-18.895-16.053-26.242-8.392-7.349-20.165-11.344-31.194-11.344z m0.24 80.456c-0.588-2.929-10.247-29.987-3.816-30.3l0.024-0.001c2.497 0 4.244 19.002 3.792 30.301z m-23.454 226.276c7.53-15.643 30.755-70.425 36.047-85.022 15.147 21.844 32.031 42.139 50.85 60.943-25.229 6.72-81.629 22.176-86.897 24.079z m215.673 1.618c-4.355 0-12.263-3.819-25.446-11.471 0 0 30.399 1.629 29.898 6.706-0.313 3.176-1.644 4.765-4.452 4.765zM252.917 714.327c-0.307 0-0.578-0.08-0.81-0.25-6.563-4.813-0.875-10.063 21-22.313 0.001 0-15.04 22.563-20.19 22.563z" p-id="2342" fill="#33b6f2"></path></svg>
            </a>`;
        parent.insertBefore(downloadlink, node)
        return false;
    }
    const editButtonEle = document.querySelector('.edit-page-link');
    createDownloadPdfElement(editButtonEle);
});